{% extends 'base.html' %}

{% block title %}Welcome to SHELFY{% endblock %}

{% block content %}
<style>
    /* Hero Section */
    .hero-section {
        background: linear-gradient(135deg, #8fb4ff 0%, #fff4ab 100%);
        padding: 5rem 0;
        border-radius: 20px;
        margin-bottom: 3rem;
        position: relative;
        overflow: hidden;
    }
    
    .hero-section::before {
        content: '';
        position: absolute;
        top: -50px;
        right: -50px;
        width: 200px;
        height: 200px;
        border-radius: 50%;
        background-color: rgba(255, 255, 255, 0.1);
        z-index: 0;
    }
    
    .hero-section::after {
        content: '';
        position: absolute;
        bottom: -50px;
        left: -50px;
        width: 200px;
        height: 200px;
        border-radius: 50%;
        background-color: rgba(255, 255, 255, 0.1);
        z-index: 0;
    }
    
    .dark-mode .hero-section {
        background: linear-gradient(135deg, #4f46e5 0%, #06b6d4 100%);
    }
    
    /* Stats Cards */
    .stat-card {
        transition: all 0.3s ease;
        border: none;
        border-radius: 16px;
        overflow: hidden;
        height: 100%;
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.05);
    }
    
    .stat-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
    }
    
    .stat-icon {
        font-size: 2.5rem;
        margin-bottom: 1rem;
    }
    
    .stat-value {
        font-size: 2.5rem;
        font-weight: 700;
        margin-bottom: 0.5rem;
    }
    
    .stat-label {
        font-size: 1rem;
        color: var(--gray);
    }
    
    /* Section Titles */
    .section-title {
        position: relative;
        margin-bottom: 2rem;
        padding-bottom: 1rem;
        display: flex;
        align-items: center;
    }
    
    .section-title::after {
        content: '';
        position: absolute;
        bottom: 0;
        left: 0;
        width: 80px;
        height: 3px;
        background: var(--primary);
        border-radius: 3px;
    }
    
    .section-title .section-icon {
        margin-right: 0.75rem;
        font-size: 1.5rem;
        color: var(--primary);
    }
    
    /* Media Cards */
    .media-carousel {
        position: relative;
        padding: 0 1rem;
    }
    
    .media-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
        gap: 1.5rem;
    }
    
    .media-card {
        transition: all 0.3s ease;
        border-radius: 12px;
        overflow: hidden;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
        background-color: var(--white);
        height: 100%;
        display: flex;
        flex-direction: column;
    }
    
    .dark-mode .media-card {
        background-color: #1e293b;
    }
    
    .media-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
    }
    
    .media-img {
        height: 220px;
        background-color: #f0f0f0;
        overflow: hidden;
    }
    
    .dark-mode .media-img {
        background-color: #374151;
    }
    
    .media-img img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        transition: transform 0.5s ease;
    }
    
    .media-card:hover .media-img img {
        transform: scale(1.05);
    }
    
    .media-content {
        padding: 1rem;
        flex-grow: 1;
        display: flex;
        flex-direction: column;
    }
    
    .media-title {
        font-weight: 600;
        font-size: 0.9rem;
        margin-bottom: 0.3rem;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
    }
    
    .media-type {
        font-size: 0.8rem;
        color: var(--gray);
        margin-bottom: 0.5rem;
    }
    
    .media-rating {
        color: #ffc107;
        font-size: 0.8rem;
        margin-bottom: 0.5rem;
    }
    
    .media-friend {
        font-size: 0.8rem;
        color: var(--primary);
        margin-bottom: 0.5rem;
    }
    
    .media-card .btn {
        margin-top: auto;
    }
    
    /* Feature Cards */
    .feature-card {
        border-radius: 16px;
        overflow: hidden;
        transition: all 0.3s ease;
        height: 100%;
        border: none;
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.05);
    }
    
    .feature-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
    }
    
    .feature-icon {
        font-size: 3rem;
        margin-bottom: 1.5rem;
    }
    
    /* CTA Section */
    .cta-section {
        background: linear-gradient(135deg, #2D336B 0%, #4ECDC4 100%);
        padding: 4rem 0;
        border-radius: 20px;
        margin: 3rem 0;
        color: white;
        position: relative;
        overflow: hidden;
    }
    
    .cta-section::before {
        content: '';
        position: absolute;
        top: -100px;
        right: -100px;
        width: 300px;
        height: 300px;
        border-radius: 50%;
        background-color: rgba(255, 255, 255, 0.05);
        z-index: 0;
    }
    
    .dark-mode .cta-section {
        background: linear-gradient(135deg, #4f46e5 0%, #06b6d4 100%);
    }
    
    /* Category Tabs */
    .category-tabs {
        display: flex;
        justify-content: center;
        margin-bottom: 2rem;
        flex-wrap: wrap;
        gap: 0.5rem;
    }
    
    .category-tab {
        padding: 0.5rem 1.5rem;
        border-radius: 50px;
        background-color: #f8f9fa;
        color: var(--dark);
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
        border: none;
    }
    
    .dark-mode .category-tab {
        background-color: #1e293b;
        color: var(--light);
    }
    
    .category-tab:hover {
        background-color: #e9ecef;
        transform: translateY(-2px);
    }
    
    .dark-mode .category-tab:hover {
        background-color: #2d3748;
    }
    
    .category-tab.active {
        background-color: var(--primary);
        color: white;
    }
    
    .dark-mode .category-tab.active {
        background-color: #4f46e5;
    }
    
    /* Responsive Adjustments */
    @media (max-width: 768px) {
        .media-grid {
            grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
        }
        
        .media-img {
            height: 180px;
        }
    }
    
    @media (max-width: 576px) {
        .media-grid {
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
        }
        
        .media-img {
            height: 160px;
        }
    }
</style>

<!-- Hero Section -->
<section class="hero-section text-center">
    <div class="container">
        <h1 class="display-4 fw-bold mb-4" data-aos="fade-up">Welcome to SHELFY</h1>
        <p class="lead mb-5" data-aos="fade-up" data-aos-delay="100">
            Your personal library for tracking books, games, and movies all in one place.
        </p>
        
        <div class="d-flex justify-content-center flex-wrap gap-3" data-aos="fade-up" data-aos-delay="200">
            {% if user.is_authenticated %}
                <a href="{% url 'user_management:dashboard' %}" class="btn btn-primary btn-lg">
                    <i class="fas fa-columns me-2"></i>Go to Dashboard
                </a>
                <a href="{% url 'user_library:index' %}" class="btn btn-outline-primary btn-lg">
                    <i class="fas fa-book me-2"></i>My Library
                </a>
            {% else %}
                <a href="{% url 'login' %}" class="btn btn-primary btn-lg">
                    <i class="fas fa-sign-in-alt me-2"></i>Log In
                </a>
                <a href="{% url 'user_management:register' %}" class="btn btn-outline-primary btn-lg">
                    <i class="fas fa-user-plus me-2"></i>Sign Up
                </a>
            {% endif %}
        </div>
    </div>
</section>

<!-- Stats Section -->
<section class="container mb-5">
    <h2 class="section-title" data-aos="fade-up">
        <i class="fas fa-chart-pie section-icon"></i>
        Community Stats
    </h2>
    
    <div class="row g-4">
        <div class="col-md-4" data-aos="fade-up" data-aos-delay="100">
            <div class="card stat-card text-center p-4">
                <div class="stat-icon text-primary">
                    <i class="fas fa-users"></i>
                </div>
                <div class="stat-value">{{ total_users|default:"0" }}</div>
                <div class="stat-label">Community Members</div>
                {% if newest_user %}
                <div class="mt-2 small text-muted">Newest member: {{ newest_user }}</div>
                {% endif %}
            </div>
        </div>
        
        <div class="col-md-4" data-aos="fade-up" data-aos-delay="200">
            <div class="card stat-card text-center p-4">
                <div class="stat-icon text-secondary">
                    <i class="fas fa-book-open"></i>
                </div>
                <div class="stat-value">{{ total_media|default:"0" }}</div>
                <div class="stat-label">Items Cataloged</div>
                {% if media_counts %}
                <div class="mt-2 small text-muted">
                    {{ media_counts.book|default:"0" }} Books / 
                    {{ media_counts.game|default:"0" }} Games / 
                    {{ media_counts.movie|default:"0" }} Movies
                </div>
                {% endif %}
            </div>
        </div>
        
        <div class="col-md-4" data-aos="fade-up" data-aos-delay="300">
            <div class="card stat-card text-center p-4">
                <div class="stat-icon" style="color: var(--accent);">
                    <i class="fas fa-layer-group"></i>
                </div>
                <div class="stat-value">{{ total_library_entries|default:"0" }}</div>
                <div class="stat-label">Library Entries</div>
                {% if status_counts %}
                <div class="mt-2 small text-muted">
                    {{ status_counts.completed|default:"0" }} Completed / 
                    {{ status_counts.in_progress|default:"0" }} In Progress
                </div>
                {% endif %}
            </div>
        </div>
    </div>
</section>

<!-- Trending Section -->
<section class="container mb-5">
    <h2 class="section-title" data-aos="fade-up">
        <i class="fas fa-fire section-icon"></i>
        Trending Now
    </h2>
    
    <div class="category-tabs" data-aos="fade-up" data-aos-delay="100">
        <button class="category-tab active" data-target="trending-all">All</button>
        <button class="category-tab" data-target="trending-books">Books</button>
        <button class="category-tab" data-target="trending-movies">Movies</button>
        <button class="category-tab" data-target="trending-games">Games</button>
    </div>
    
    <div class="tab-content">
        <div class="tab-pane active" id="trending-all">
            <div class="media-grid">
                {% for media in trending_books|slice:":2" %}
                <div class="media-card" data-aos="fade-up" data-aos-delay="{{ forloop.counter|add:100 }}">
                    <a href="{% url 'media_detail' media_type=media.media_type external_id=media.external_id %}" class="text-decoration-none">
                        <div class="media-img">
                            <img src="{{ media.cover_image }}" alt="{{ media.title }}">
                        </div>
                    </a>
                    <div class="media-content">
                        <h3 class="media-title">{{ media.title }}</h3>
                        <div class="media-type">
                            <i class="fas fa-book me-1"></i> Book
                            {% if media.release_year %} • {{ media.release_year }}{% endif %}
                        </div>
                        {% if media.author %}
                        <div class="media-type">
                            By {{ media.author }}
                        </div>
                        {% endif %}
                        
                        <form method="POST" action="{% url 'user_library:add' %}" class="mt-2">
                            {% csrf_token %}
                            <input type="hidden" name="media_type" value="{{ media.media_type }}">
                            <input type="hidden" name="external_id" value="{{ media.external_id }}">
                            <button type="submit" class="btn btn-sm btn-outline-primary w-100">Add to Library</button>
                        </form>
                    </div>
                </div>
                {% endfor %}
                
                {% for media in trending_movies|slice:":2" %}
                <div class="media-card" data-aos="fade-up" data-aos-delay="{{ forloop.counter|add:300 }}">
                    <a href="{% url 'media_detail' media_type=media.media_type external_id=media.external_id %}" class="text-decoration-none">
                        <div class="media-img">
                            <img src="{{ media.cover_image }}" alt="{{ media.title }}">
                        </div>
                    </a>
                    <div class="media-content">
                        <h3 class="media-title">{{ media.title }}</h3>
                        <div class="media-type">
                            <i class="fas fa-film me-1"></i> Movie
                            {% if media.release_year %} • {{ media.release_year }}{% endif %}
                        </div>
                        
                        <form method="POST" action="{% url 'user_library:add' %}" class="mt-2">
                            {% csrf_token %}
                            <input type="hidden" name="media_type" value="{{ media.media_type }}">
                            <input type="hidden" name="external_id" value="{{ media.external_id }}">
                            <button type="submit" class="btn btn-sm btn-outline-primary w-100">Add to Library</button>
                        </form>
                    </div>
                </div>
                {% endfor %}
                
                {% for media in trending_games|slice:":2" %}
                <div class="media-card" data-aos="fade-up" data-aos-delay="{{ forloop.counter|add:500 }}">
                    <a href="{% url 'media_detail' media_type=media.media_type external_id=media.external_id %}" class="text-decoration-none">
                        <div class="media-img">
                            <img src="{{ media.cover_image }}" alt="{{ media.title }}">
                        </div>
                    </a>
                    <div class="media-content">
                        <h3 class="media-title">{{ media.title }}</h3>
                        <div class="media-type">
                            <i class="fas fa-gamepad me-1"></i> Game
                            {% if media.release_year %} • {{ media.release_year }}{% endif %}
                        </div>
                        
                        <form method="POST" action="{% url 'user_library:add' %}" class="mt-2">
                            {% csrf_token %}
                            <input type="hidden" name="media_type" value="{{ media.media_type }}">
                            <input type="hidden" name="external_id" value="{{ media.external_id }}">
                            <button type="submit" class="btn btn-sm btn-outline-primary w-100">Add to Library</button>
                        </form>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
        
        <div class="tab-pane" id="trending-books" style="display: none;">
            <div class="media-grid">
                {% for media in trending_books %}
                <div class="media-card" data-aos="fade-up" data-aos-delay="{{ forloop.counter|add:100 }}">
                    <a href="{% url 'media_detail' media_type=media.media_type external_id=media.external_id %}" class="text-decoration-none">
                        <div class="media-img">
                            <img src="{{ media.cover_image }}" alt="{{ media.title }}">
                        </div>
                    </a>
                    <div class="media-content">
                        <h3 class="media-title">{{ media.title }}</h3>
                        <div class="media-type">
                            <i class="fas fa-book me-1"></i> Book
                            {% if media.release_year %} • {{ media.release_year }}{% endif %}
                        </div>
                        {% if media.author %}
                        <div class="media-type">
                            By {{ media.author }}
                        </div>
                        {% endif %}
                        
                        <form method="POST" action="{% url 'user_library:add' %}" class="mt-2">
                            {% csrf_token %}
                            <input type="hidden" name="media_type" value="{{ media.media_type }}">
                            <input type="hidden" name="external_id" value="{{ media.external_id }}">
                            <button type="submit" class="btn btn-sm btn-outline-primary w-100">Add to Library</button>
                        </form>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
        
        <div class="tab-pane" id="trending-movies" style="display: none;">
            <div class="media-grid">
                {% for media in trending_movies %}
                <div class="media-card" data-aos="fade-up" data-aos-delay="{{ forloop.counter|add:100 }}">
                    <a href="{% url 'media_detail' media_type=media.media_type external_id=media.external_id %}" class="text-decoration-none">
                        <div class="media-img">
                            <img src="{{ media.cover_image }}" alt="{{ media.title }}">
                        </div>
                    </a>
                    <div class="media-content">
                        <h3 class="media-title">{{ media.title }}</h3>
                        <div class="media-type">
                            <i class="fas fa-film me-1"></i> Movie
                            {% if media.release_year %} • {{ media.release_year }}{% endif %}
                        </div>
                        
                        <form method="POST" action="{% url 'user_library:add' %}" class="mt-2">
                            {% csrf_token %}
                            <input type="hidden" name="media_type" value="{{ media.media_type }}">
                            <input type="hidden" name="external_id" value="{{ media.external_id }}">
                            <button type="submit" class="btn btn-sm btn-outline-primary w-100">Add to Library</button>
                        </form>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
        
        <div class="tab-pane" id="trending-games" style="display: none;">
            <div class="media-grid">
                {% for media in trending_games %}
                <div class="media-card" data-aos="fade-up" data-aos-delay="{{ forloop.counter|add:100 }}">
                    <a href="{% url 'media_detail' media_type=media.media_type external_id=media.external_id %}" class="text-decoration-none">
                        <div class="media-img">
                            <img src="{{ media.cover_image }}" alt="{{ media.title }}">
                        </div>
                    </a>
                    <div class="media-content">
                        <h3 class="media-title">{{ media.title }}</h3>
                        <div class="media-type">
                            <i class="fas fa-gamepad me-1"></i> Game
                            {% if media.release_year %} • {{ media.release_year }}{% endif %}
                        </div>
                        
                        <form method="POST" action="{% url 'user_library:add' %}" class="mt-2">
                            {% csrf_token %}
                            <input type="hidden" name="media_type" value="{{ media.media_type }}">
                            <input type="hidden" name="external_id" value="{{ media.external_id }}">
                            <button type="submit" class="btn btn-sm btn-outline-primary w-100">Add to Library</button>
                        </form>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
    </div>
</section>

<!-- Recommended Section -->
{% if user.is_authenticated and recommended_media %}
<section class="container mb-5">
    <h2 class="section-title" data-aos="fade-up">
        <i class="fas fa-thumbs-up section-icon"></i>
        Recommended For You
    </h2>
    
    <div class="media-grid">
        {% for media in recommended_media %}
        <div class="media-card" data-aos="fade-up" data-aos-delay="{{ forloop.counter|add:100 }}">
            <a href="{% url 'media_detail' media_type=media.media_type external_id=media.external_id %}" class="text-decoration-none">
                <div class="media-img">
                    <img src="{{ media.cover_image }}" alt="{{ media.title }}">
                </div>
            </a>
            <div class="media-content">
                <h3 class="media-title">{{ media.title }}</h3>
                <div class="media-type">
                    {% if media.media_type == "book" %}
                        <i class="fas fa-book me-1"></i> Book
                    {% elif media.media_type == "movie" %}
                        <i class="fas fa-film me-1"></i> Movie
                    {% elif media.media_type == "game" %}
                        <i class="fas fa-gamepad me-1"></i> Game
                    {% endif %}
                    {% if media.release_year %} • {{ media.release_year }}{% endif %}
                </div>
                
                <form method="POST" action="{% url 'user_library:add' %}" class="mt-2">
                    {% csrf_token %}
                    <input type="hidden" name="media_type" value="{{ media.media_type }}">
                    <input type="hidden" name="external_id" value="{{ media.external_id }}">
                    <button type="submit" class="btn btn-sm btn-outline-primary w-100">Add to Library</button>
                </form>
            </div>
        </div>
        {% endfor %}
    </div>
</section>
{% endif %}

<!-- Friend Recommendations Section -->
{% if friend_recommendations %}
<section class="container mb-5">
    <h2 class="section-title" data-aos="fade-up">
        <i class="fas fa-users section-icon"></i>
        Your Friends Recommend
    </h2>
    
    <div class="media-grid">
        {% for media in friend_recommendations %}
        <div class="media-card" data-aos="fade-up" data-aos-delay="{{ forloop.counter|add:100 }}">
            <a href="{% url 'media_detail' media_type=media.media_type external_id=media.external_id %}" class="text-decoration-none">
                <div class="media-img">
                    <img src="{{ media.cover_image }}" alt="{{ media.title }}">
                </div>
            </a>
            <div class="media-content">
                <h3 class="media-title">{{ media.title }}</h3>
                <div class="media-type">
                    {% if media.media_type == "book" %}
                        <i class="fas fa-book me-1"></i> Book
                    {% elif media.media_type == "movie" %}
                        <i class="fas fa-film me-1"></i> Movie
                    {% elif media.media_type == "game" %}
                        <i class="fas fa-gamepad me-1"></i> Game
                    {% endif %}
                    {% if media.release_year %} • {{ media.release_year }}{% endif %}
                </div>
                <div class="media-friend">
                    <i class="fas fa-user-circle me-1"></i> {{ media.friend }} recommends this
                </div>
                
                <form method="POST" action="{% url 'user_library:add' %}" class="mt-2">
                    {% csrf_token %}
                    <input type="hidden" name="media_type" value="{{ media.media_type }}">
                    <input type="hidden" name="external_id" value="{{ media.external_id }}">
                    <button type="submit" class="btn btn-sm btn-outline-primary w-100">Add to Library</button>
                </form>
            </div>
        </div>
        {% endfor %}
    </div>
</section>
{% endif %}

<!-- Recent Additions Section -->
{% if recent_media %}
<section class="container mb-5">
    <h2 class="section-title" data-aos="fade-up">
        <i class="fas fa-clock section-icon"></i>
        Recent Additions
    </h2>
    
    <div class="media-grid">
        {% for media in recent_media %}
        <div class="media-card" data-aos="fade-up" data-aos-delay="{{ forloop.counter|add:100 }}">
            <a href="{% url 'media_detail' media_type=media.media_type external_id=media.external_id %}" class="text-decoration-none">
                <div class="media-img">
                    <img src="{{ media.cover_image }}" alt="{{ media.title }}">
                </div>
            </a>
            <div class="media-content">
                <h3 class="media-title">{{ media.title }}</h3>
                <div class="media-type">
                    {% if media.media_type == "book" %}
                        <i class="fas fa-book me-1"></i> Book
                    {% elif media.media_type == "movie" %}
                        <i class="fas fa-film me-1"></i> Movie
                    {% elif media.media_type == "game" %}
                        <i class="fas fa-gamepad me-1"></i> Game
                    {% endif %}
                    {% if media.release_year %} • {{ media.release_year }}{% endif %}
                </div>
                
                <form method="POST" action="{% url 'user_library:add' %}" class="mt-2">
                    {% csrf_token %}
                    <input type="hidden" name="media_type" value="{{ media.media_type }}">
                    <input type="hidden" name="external_id" value="{{ media.external_id }}">
                    <button type="submit" class="btn btn-sm btn-outline-primary w-100">Add to Library</button>
                </form>
            </div>
        </div>
        {% endfor %}
    </div>
</section>
{% endif %}

<!-- Features Section -->
<section class="container mb-5">
    <h2 class="section-title" data-aos="fade-up">
        <i class="fas fa-star section-icon"></i>
        Features
    </h2>
    
    <div class="row g-4">
        <div class="col-md-4" data-aos="fade-up" data-aos-delay="100">
            <div class="card feature-card text-center p-4">
                <div class="feature-icon text-primary">
                    <i class="fas fa-book"></i>
                </div>
                <h3 class="h4 mb-3">Track Books</h3>
                <p class="mb-0">Keep track of books you've read, want to read, and are currently reading. Rate and review your favorites.</p>
            </div>
        </div>
        
        <div class="col-md-4" data-aos="fade-up" data-aos-delay="200">
            <div class="card feature-card text-center p-4">
                <div class="feature-icon text-secondary">
                    <i class="fas fa-gamepad"></i>
                </div>
                <h3 class="h4 mb-3">Manage Games</h3>
                <p class="mb-0">Organize your game collection and track your progress through your backlog. Never lose track of what you're playing.</p>
            </div>
        </div>
        
        <div class="col-md-4" data-aos="fade-up" data-aos-delay="300">
            <div class="card feature-card text-center p-4">
                <div class="feature-icon" style="color: var(--accent);">
                    <i class="fas fa-film"></i>
                </div>
                <h3 class="h4 mb-3">Catalog Movies</h3>
                <p class="mb-0">Build your movie watchlist and rate films you've already watched. Keep track of your favorite directors and genres.</p>
            </div>
        </div>
    </div>
</section>

<!-- CTA Section -->
<section class="cta-section text-center">
    <div class="container">
        <h2 class="display-5 fw-bold mb-4" data-aos="fade-up">Ready to organize your collection?</h2>
        <p class="lead mb-5" data-aos="fade-up" data-aos-delay="100">
            Join SHELFY today and start tracking your books, games, and movies in one place.
        </p>
        
        <div class="d-flex justify-content-center flex-wrap gap-3" data-aos="fade-up" data-aos-delay="200">
            {% if user.is_authenticated %}
                <a href="{% url 'media_search' %}?q=" class="btn btn-light btn-lg">
                    <i class="fas fa-search me-2"></i>Search Media
                </a>
                <a href="{% url 'user_library:index' %}" class="btn btn-outline-light btn-lg">
                    <i class="fas fa-book me-2"></i>View My Library
                </a>
            {% else %}
                <a href="{% url 'user_management:register' %}" class="btn btn-light btn-lg">
                    <i class="fas fa-user-plus me-2"></i>Sign Up Now
                </a>
                <a href="{% url 'login' %}" class="btn btn-outline-light btn-lg">
                    <i class="fas fa-sign-in-alt me-2"></i>Log In
                </a>
            {% endif %}
        </div>
    </div>
</section>

<script>
    // Category tabs functionality
    document.addEventListener('DOMContentLoaded', function() {
        const tabs = document.querySelectorAll('.category-tab');
        
        tabs.forEach(tab => {
            tab.addEventListener('click', function() {
                // Remove active class from all tabs
                tabs.forEach(t => t.classList.remove('active'));
                
                // Add active class to clicked tab
                this.classList.add('active');
                
                // Hide all tab panes
                document.querySelectorAll('.tab-pane').forEach(pane => {
                    pane.style.display = 'none';
                });
                
                // Show the selected tab pane
                const target = this.getAttribute('data-target');
                document.getElementById(target).style.display = 'block';
            });
        });
    });

    document.addEventListener("DOMContentLoaded", function() {
        document.querySelectorAll(".add-to-library-form").forEach(form => {
            form.addEventListener("submit", function(event) {
                event.preventDefault();

                let formData = new FormData(form);
                let feedbackDiv = form.querySelector(".feedback-message");

                fetch(form.action, {
                    method: "POST",
                    body: formData,
                    headers: { "X-CSRFToken": formData.get("csrfmiddlewaretoken") }
                })
                .then(response => response.json())
                .then(data => {
                    if (!feedbackDiv) {
                        feedbackDiv = document.createElement("div");
                        feedbackDiv.classList.add("feedback-message", "mt-2", "text-center");
                        form.appendChild(feedbackDiv);
                    }

                    feedbackDiv.textContent = data.message;

                        setTimeout(() => {
                        feedbackDiv.style.display = "none";
                    }, 3000);
                })
                .catch(error => console.error("Error:", error));
            });
        });
    });

</script>
{% endblock %}

